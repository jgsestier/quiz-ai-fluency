<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz AI Fluency</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .gradient-bg { background: linear-gradient(135deg, #3b82f6, #8b5cf6); }
        .hover-scale:hover { transform: scale(1.02); }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-purple-50 min-h-screen">
    <div id="app"></div>
    
    <script>
        // Variables globales
        let currentQuestion = 0, selectedAnswer = null, showExplanation = false, score = 0, answers = [], quizCompleted = false, startTime = Date.now(), timeSpent = 0, timer;

        // Questions (version simplifi√©e pour √©viter les erreurs)
        const questions = [
            { id: 1, category: "Comprendre", question: "Qu'est-ce qu'une hallucination dans un LLM ?", options: ["Arr√™t brutal", "R√©ponse plausible mais fausse", "Prompt court", "Biais donn√©es"], correct: 1, explanation: "Une hallucination se produit quand le mod√®le g√©n√®re une information cr√©dible mais incorrecte." },
            { id: 2, category: "Comprendre", question: "La self-attention sert √† :", options: ["Normaliser", "D√©tecter spam", "Pond√©rer les tokens", "Compresser"], correct: 2, explanation: "La self-attention d√©termine l'importance relative des mots dans la s√©quence." },
            { id: 3, category: "Utiliser", question: "Few-shot prompting consiste √† :", options: ["Diviser requ√™te", "Donner des exemples", "Limiter tokens", "Reset contexte"], correct: 1, explanation: "Le few-shot fournit des exemples pour guider la sortie du mod√®le." },
            { id: 4, category: "Utiliser", question: "Pour un r√©sum√© objectif, baisser quel param√®tre ?", options: ["Temperature", "Top-p", "Max_tokens", "Frequency"], correct: 0, explanation: "Baisser la temp√©rature favorise des r√©ponses plus d√©terministes." },
            { id: 5, category: "√âvaluer", question: "Dans RAG, le retrieval sert √† :", options: ["Filtrer apr√®s", "Extraire avant g√©n√©ration", "Agrandir mod√®le", "Corriger grammaire"], correct: 1, explanation: "RAG r√©cup√®re d'abord des documents pertinents avant la g√©n√©ration." }
        ];

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return mins + ':' + secs.toString().padStart(2, '0');
        }

        function getScoreLevel(score) {
            if (score >= 4) return { level: "AI Fluent", color: "text-green-600", icon: "üèÜ" };
            if (score >= 3) return { level: "AI Conversant", color: "text-blue-600", icon: "ü•à" };
            if (score >= 2) return { level: "AI Novice", color: "text-orange-600", icon: "ü•â" };
            return { level: "Foundational", color: "text-gray-600", icon: "üìö" };
        }

        function render() {
            const app = document.getElementById('app');
            
            if (!quizCompleted && currentQuestion === 0 && !timer) {
                // √âcran de d√©marrage
                app.innerHTML = `
                    <div class="max-w-4xl mx-auto p-6">
                        <div class="bg-white rounded-2xl shadow-xl p-8 text-center">
                            <div class="text-6xl mb-6">üß†</div>
                            <h1 class="text-4xl font-bold mb-4">Quiz AI Fluency</h1>
                            <p class="text-lg text-gray-600 mb-8">Testez vos connaissances en IA !</p>
                            <button onclick="startQuiz()" class="gradient-bg text-white px-8 py-4 rounded-xl font-semibold hover-scale transition-all">
                                üöÄ Commencer le Quiz
                            </button>
                        </div>
                    </div>
                `;
            } else if (!quizCompleted) {
                // Quiz en cours
                const q = questions[currentQuestion];
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                
                let optionsHTML = '';
                q.options.forEach((option, i) => {
                    let buttonClass = 'w-full p-4 text-left border-2 rounded-xl transition-all duration-300 ';
                    if (showExplanation) {
                        if (i === q.correct) buttonClass += 'border-green-500 bg-green-50 text-green-800';
                        else if (i === selectedAnswer && i !== q.correct) buttonClass += 'border-red-500 bg-red-50 text-red-800';
                        else buttonClass += 'border-gray-200 bg-gray-50 text-gray-600';
                    } else {
                        if (selectedAnswer === i) buttonClass += 'border-blue-500 bg-blue-50 text-blue-800';
                        else buttonClass += 'border-gray-200 hover:border-blue-300 hover:bg-blue-50 text-gray-700';
                    }
                    
                    optionsHTML += `
                        <button onclick="selectAnswer(${i})" class="${buttonClass}" ${showExplanation ? 'disabled' : ''}>
                            <div class="flex items-center">
                                <span class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-sm font-semibold mr-4">
                                    ${String.fromCharCode(65 + i)}
                                </span>
                                <span class="flex-1">${option}</span>
                                ${showExplanation && i === q.correct ? '<span class="ml-2">‚úÖ</span>' : ''}
                                ${showExplanation && i === selectedAnswer && i !== q.correct ? '<span class="ml-2">‚ùå</span>' : ''}
                            </div>
                        </button>
                    `;
                });

                app.innerHTML = `
                    <div class="max-w-4xl mx-auto p-6">
                        <div class="bg-white rounded-2xl shadow-xl p-8">
                            <div class="flex justify-between mb-6">
                                <div>
                                    <h2 class="text-lg font-semibold">${q.category}</h2>
                                    <p class="text-sm text-gray-600">Question ${currentQuestion + 1} sur ${questions.length}</p>
                                </div>
                                <div class="text-right">
                                    <div class="text-2xl font-bold text-blue-600">${score}</div>
                                    <div class="text-sm text-gray-600">Score</div>
                                </div>
                            </div>
                            
                            <div class="w-full bg-gray-200 rounded-full h-2 mb-8">
                                <div class="gradient-bg h-2 rounded-full transition-all duration-500" style="width: ${progress}%"></div>
                            </div>
                            
                            <h1 class="text-2xl font-bold mb-6">${q.question}</h1>
                            
                            <div class="space-y-3 mb-8">
                                ${optionsHTML}
                            </div>
                            
                            ${showExplanation ? `
                                <div class="mb-8 p-6 bg-blue-50 rounded-xl border border-blue-200">
                                    <h3 class="text-lg font-semibold text-blue-800 mb-3">üìñ Explication</h3>
                                    <p class="text-gray-700">${q.explanation}</p>
                                </div>
                            ` : ''}
                            
                            <div class="flex justify-between items-center">
                                <div class="text-sm text-gray-600">‚è±Ô∏è ${formatTime(timeSpent)}</div>
                                <button onclick="handleNext()" ${selectedAnswer === null ? 'disabled' : ''} 
                                        class="px-8 py-3 rounded-xl font-semibold transition-all ${selectedAnswer === null ? 'bg-gray-300 text-gray-500' : 'gradient-bg text-white hover-scale'}">
                                    ${!showExplanation ? 'Valider ‚úÖ' : (currentQuestion === questions.length - 1 ? 'Voir r√©sultats üèÜ' : 'Suivant ‚û°Ô∏è')}
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            } else {
                // R√©sultats
                const scoreLevel = getScoreLevel(score);
                const percentage = Math.round((score / questions.length) * 100);
                
                app.innerHTML = `
                    <div class="max-w-4xl mx-auto p-6">
                        <div class="bg-white rounded-2xl shadow-xl p-8 text-center">
                            <div class="text-6xl mb-4">${scoreLevel.icon}</div>
                            <h1 class="text-3xl font-bold mb-4">Quiz Termin√© !</h1>
                            
                            <div class="gradient-bg text-white rounded-xl p-6 mb-6">
                                <div class="text-4xl font-bold mb-2">${score}/${questions.length}</div>
                                <div class="text-xl font-semibold ${scoreLevel.color} bg-white rounded-lg py-2 px-4 inline-block mb-3">
                                    ${scoreLevel.level}
                                </div>
                                <p class="text-sm opacity-90">Score: ${percentage}% ‚Ä¢ Temps: ${formatTime(timeSpent)}</p>
                            </div>
                            
                            <button onclick="restart()" class="gradient-bg text-white px-8 py-3 rounded-xl font-semibold hover-scale transition-all">
                                üîÑ Recommencer
                            </button>
                        </div>
                    </div>
                `;
            }
        }

        function startQuiz() {
            startTime = Date.now();
            timer = setInterval(() => {
                if (!quizCompleted) {
                    timeSpent = Math.floor((Date.now() - startTime) / 1000);
                    render();
                }
            }, 1000);
            render();
        }

        function selectAnswer(index) {
            if (showExplanation) return;
            selectedAnswer = index;
            render();
        }

        function handleNext() {
            if (selectedAnswer === null) return;
            
            if (!showExplanation) {
                showExplanation = true;
            } else {
                const isCorrect = selectedAnswer === questions[currentQuestion].correct;
                if (isCorrect) score++;
                
                if (currentQuestion < questions.length - 1) {
                    currentQuestion++;
                    selectedAnswer = null;
                    showExplanation = false;
                } else {
                    quizCompleted = true;
                    clearInterval(timer);
                }
            }
            render();
        }

        function restart() {
            currentQuestion = 0;
            selectedAnswer = null;
            showExplanation = false;
            score = 0;
            quizCompleted = false;
            timeSpent = 0;
            if (timer) clearInterval(timer);
            timer = null;
            render();
        }

        // Initialisation
        render();
    </script>
</body>
</html>
